#!/bin/sh

case "$1" in
    build)
        python3 setup.py bdist -d dist/python3
    ;;

    # package)
    #     mkdir -p ${pkgdir}/usr/share/wazo-confd/plugins
    #     tar -xvf dist/python3/wazo-confd-whitelist-*.tar.gz -C ${pkgdir}/usr/share/wazo-confd/plugins/
    #     cp -R etc ${pkgdir}/usr/share/wazo-confd/plugins/ || true
    # ;;
    package)
        tar xvf dist/python3/wazo-confd-whitelist-*.tar.gz -C ${pkgdir}
        cp -R etc ${pkgdir}/
    ;;

    install)
        systemctl restart wazo-confd
        # asterisk -x 'dialplan reload'
    ;;

    uninstall)
        rm -rf /usr/share/wazo-confd/plugins/wazo-confd-whitelist*
        rm -rf /etc/your-specific-whitelist-config-directory  # Add specific config directory if any
        systemctl restart wazo-confd
        # asterisk -x 'dialplan reload'
    ;;


    postrm)
    ;;

    *)
        echo "$0 called with unknown argument '$1'" >&2
        exit 1
    ;;
esac
